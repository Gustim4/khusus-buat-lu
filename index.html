<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  background: black;
  overflow: hidden;
  font-family: Arial, sans-serif;
}

/* CANVAS */
canvas {
  position: fixed;
  inset: 0;
  z-index: 1;
}

/* START SCREEN */
#startScreen {
  position: fixed;
  inset: 0;
  background: black;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 5;
}

#startBtn {
  padding: 16px 30px;
  font-size: 20px;
  border: none;
  border-radius: 12px;
  background: #ff4dd2;
  color: white;
  cursor: pointer;
  box-shadow: 0 0 20px rgba(255,0,255,.6);
}

/* FINAL SCENE */
#finalScene {
  position: fixed;
  inset: 0;
  z-index: 3;
  display: flex;
  justify-content: center;
  align-items: center;
  opacity: 0;
  visibility: hidden;
  transition: opacity 1.5s ease;
}

#finalScene.show {
  opacity: 1;
  visibility: visible;
}

/* CARD */
.card {
  background: #111;
  color: white;
  border-radius: 18px;
  padding: 28px 30px;
  max-width: 320px;
  text-align: center;
  box-shadow: 0 0 40px rgba(255,0,255,.4);
  position: relative;
  z-index: 4;
}

.card h1 {
  margin: 0;
  color: #ff4dd2;
}

/* PHOTOS */
.photos {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.photo {
  width: 160px;
  height: 160px;
  border-radius: 14px;
  overflow: hidden;
  position: absolute;
  box-shadow: 0 0 25px rgba(255,0,255,.7);
  transition: transform 0.5s ease;
}

.photo img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* DESKTOP POSITION */
.photo.l1 { left: 8%; top: 12%; transform: rotate(-8deg); }
.photo.l2 { left: 4%; top: 35%; transform: rotate(-4deg); }
.photo.l3 { left: 8%; top: 60%; transform: rotate(-10deg); }

.photo.r1 { right: 8%; top: 12%; transform: rotate(8deg); }
.photo.r2 { right: 4%; top: 35%; transform: rotate(4deg); }
.photo.r3 { right: 8%; top: 60%; transform: rotate(10deg); }

/* HP PORTRAIT FIX */
@media (max-width: 768px) {

  .photo {
    width: 95px;
    height: 95px;
  }

  /* geser ke pinggir */
  .photo.l1 { left: -10px; top: 15%; }
  .photo.l2 { left: -20px; top: 40%; }
  .photo.l3 { left: -10px; top: 65%; }

  .photo.r1 { right: -10px; top: 15%; }
  .photo.r2 { right: -20px; top: 40%; }
  .photo.r3 { right: -10px; top: 65%; }

  .card {
    max-width: 250px;
    padding: 18px;
  }
}

</style>
</head>

<body>

<div id="startScreen">
  <button id="startBtn">Klik Untuk Mulai ðŸŽ‰</button>
</div>

<canvas id="canvas"></canvas>

<audio id="bgm" src="musik.mp3" loop></audio>

<div id="finalScene">
  <div class="photos">
    <div class="photo l1"><img src="foto2.jpeg"></div>
    <div class="photo l2"><img src="foto1.jpeg"></div>
    <div class="photo l3"><img src="foto3.jpeg"></div>
    <div class="photo r1"><img src="1.png"></div>
    <div class="photo r2"><img src="3.png"></div>
    <div class="photo r3"><img src="2.png"></div>
  </div>

  <div class="card">
    <h1>Happy Birthday ðŸŽ‰</h1>
    <p><b>zulpee</b></p>
    <p>
       Semoga makin keren, makin sukses, dan semua cita-citanya cepat tercapai.
       Jangan lupa tetap jadi kakak kelas yang asik dan rendah hati yaa ðŸ˜„
      Sehat selalu dan bahagia terus! btw lu panutan gua sumpahâœ¨
    </p>
    <p>â€” from your adikell ðŸ’–</p>
  </div>
</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const bgm = document.getElementById("bgm");

function resize() {
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
resize();
addEventListener("resize", resize);

const NAME = "zulfaa";
const TEXTS = [
  "Selamat Ulang Tahun",
  "Semoga Panjang Umur",
  "Bahagia Selalu",
  "Moga Sukses"
];

let rockets = [];
let particles = [];
let stage = 0;
let index = 0;
let finalShown = false;
let started = false;

class Rocket {
  constructor(text, isName=false) {
    this.x = canvas.width/2;
    this.y = canvas.height + 30;
    this.text = text;
    this.isName = isName;
    this.targetY = canvas.height * .35;
    this.speed = 11;
    this.done = false;
  }
  update() {
    this.y -= this.speed;
    if (this.y <= this.targetY) {
      this.done = true;
      explodeText(this.x, this.y, this.text, this.isName);
    }
  }
  draw() {
    ctx.fillStyle = "white";
    ctx.fillRect(this.x-1, this.y, 2, 16);
  }
}

class Particle {
  constructor(x,y,tx,ty,color) {
    this.x=x; this.y=y;
    this.tx=tx; this.ty=ty;
    this.vx=(Math.random()-.5)*10;
    this.vy=(Math.random()-.5)*10;
    this.a=1;
    this.c=color;
  }
  update() {
    this.vx*=.88; 
    this.vy*=.88;
    this.x+=this.vx+(this.tx-this.x)*.08;
    this.y+=this.vy+(this.ty-this.y)*.08;
    this.a-=.012;
  }
  draw() {
    ctx.fillStyle=`rgba(${this.c},${this.a})`;
    ctx.beginPath();
    ctx.arc(this.x,this.y,2,0,Math.PI*2);
    ctx.fill();
  }
}

function explodeText(x,y,text,isName){
  const off=document.createElement("canvas");
  const octx=off.getContext("2d");
  off.width=canvas.width;
  off.height=canvas.height;

  octx.textAlign="center";
  octx.fillStyle="white";
  octx.font=`bold ${isName?160:82}px Arial`;
  octx.fillText(text,off.width/2,off.height/2);

  const img=octx.getImageData(0,0,off.width,off.height);
  const color=`${Math.random()*255},${Math.random()*255},${Math.random()*255}`;

  for(let y2=0;y2<off.height;y2+=6){
    for(let x2=0;x2<off.width;x2+=6){
      const i=(y2*off.width+x2)*4;
      if(img.data[i+3]>150){
        particles.push(new Particle(x,y,x2,y2,color));
      }
    }
  }
}

function nextRocket(){
  if(stage===0){
    rockets.push(new Rocket(NAME,true));
    stage=1;
  } else if(stage===1 && index<TEXTS.length){
    rockets.push(new Rocket(TEXTS[index]));
    index++;
  } else {
    stage=2;
  }
}

function animate(){
  if(!started) return;

  ctx.fillStyle="rgba(0,0,0,.25)";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  for(let i=rockets.length-1;i>=0;i--){
    rockets[i].update();
    rockets[i].draw();
    if(rockets[i].done){
      rockets.splice(i,1);
      setTimeout(nextRocket,1200);
    }
  }

  for(let i=particles.length-1;i>=0;i--){
    particles[i].update();
    particles[i].draw();
    if(particles[i].a<=0) particles.splice(i,1);
  }

  if(!finalShown && stage===2 && rockets.length===0 && particles.length===0){
    finalShown=true;
    document.getElementById("finalScene").classList.add("show");
  }

  requestAnimationFrame(animate);
}

document.getElementById("startBtn").onclick = () => {
  document.getElementById("startScreen").style.display = "none";
  bgm.play();
  started = true;
  setTimeout(nextRocket,800);
  animate();
};
</script>

</body>
</html>

